<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Vardiya Test</title>
</head>
<body>
  <h2>Konsolda Vardiya Listesi</h2>
  <script>
    const personeller = [
      { isim: "Ahmet", bolum: "Güvenlik", gece: true, sonIzin: 0 },
      { isim: "Ayşe", bolum: "Muhasebe", gece: false, sonIzin: 0 },
      { isim: "Mehmet", bolum: "IT", gece: true, sonIzin: 0 }
    ];

    const bolumler = [
      { isim: "Güvenlik", gece: true },
      { isim: "Muhasebe", gece: false },
      { isim: "IT", gece: true }
    ];

    function haftalikVardiyaOlustur() {
      const hafta = [];
      for (let gun = 1; gun <= 7; gun++) {
        const gunluk = {};
        bolumler.forEach(bolum => {
          let uygunlar = personeller.filter(p =>
            p.bolum === bolum.isim &&
            (!bolum.gece || p.gece) &&
            (gun - p.sonIzin <= 5)
          );
          if (uygunlar.length > 0) {
            const secilen = uygunlar[Math.floor(Math.random() * uygunlar.length)];
            gunluk[bolum.isim] = secilen.isim;
            secilen.sonIzin = gun;
          } else {
            gunluk[bolum.isim] = "İzin";
          }
        });
        hafta.push(gunluk);
      }
      return hafta;
    }

    console.log(haftalikVardiyaOlustur());
  </script>
</body>
</html>
